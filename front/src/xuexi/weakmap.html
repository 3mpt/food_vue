<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="like">like</button>
    <script>
        // let wmap =new WeakMap()
        // wmap.set(document.getElementById("like"),{click:0})
        // document.getElementById("like").addEventListener('click',function(){
        //     let times = wmap.get(document.getElementById("like"))
        //     times.click++
        // },false)
        // setTimeout(()=>{
        //     document.body.removeChild(document.getElementById("like"))
        //     // like=null
        //     console.log(document.getElementById("like")) //like依然是可以访问到，并不是赋值为null
        // },2000) //两秒钟后消失

        // let obj={
        //     name:"sdsad"
        // }
        // let wobj = new WeakRef(obj) //如果将来obj为空了，wobj是弱引用不会阻止垃圾回收对象进行回收
        // obj =null
        // console.log(obj) //拿到原始对象
        let wmap =new WeakMap()
        let like =new WeakRef(document.getElementById("like"))
        wmap.set(like.deref(),{click:0})
        like.deref().onclick=()=>{
            let times = wmap.get(like.deref())
            times.click++
        }
        setTimeout(()=>{
            document.body.removeChild(like.deref())
            // like=null
            console.log(document.getElementById("like")) //like依然是可以访问到，并不是赋值为null
        },2000) //两秒钟后消失
    </script>
    
    
</body>
</html>